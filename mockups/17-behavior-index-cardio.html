<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flux - Cardio Index</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: white;
      min-height: 100vh;
    }

    .behavior-index-page {
      max-width: 768px;
      margin: 0 auto;
      background: white;
      min-height: 100vh;
      padding-bottom: 100px;
    }

    /* Header */
    .detail-header {
      display: flex;
      align-items: center;
      padding: 16px;
      border-bottom: 1px solid #e5e7eb;
      position: sticky;
      top: 0;
      background: white;
      z-index: 10;
    }

    .back-button {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: none;
      cursor: pointer;
      color: #374151;
      margin-right: 8px;
    }

    .header-content {
      flex: 1;
    }

    .behavior-title {
      font-size: 20px;
      font-weight: 700;
      color: #111827;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .behavior-ticker {
      font-size: 14px;
      color: #6b7280;
      font-weight: 500;
    }

    .behavior-category {
      font-size: 13px;
      color: #6b7280;
      margin-top: 2px;
    }

    /* Live Badge */
    .live-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      background: #dcfce7;
      color: #16a34a;
      padding: 4px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
    }

    .live-dot {
      width: 6px;
      height: 6px;
      background: #16a34a;
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    /* Index Hero Section */
    .index-hero {
      padding: 24px 16px;
      background: linear-gradient(180deg, #fafafa 0%, white 100%);
    }

    .index-main-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 16px;
    }

    .index-value-section {
      flex: 1;
    }

    .index-label {
      font-size: 12px;
      color: #6b7280;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 4px;
    }

    .index-value-row {
      display: flex;
      align-items: baseline;
      gap: 12px;
    }

    .index-value {
      font-size: 42px;
      font-weight: 700;
      color: #111827;
    }

    .index-change {
      display: flex;
      align-items: center;
      gap: 4px;
      font-size: 15px;
      font-weight: 600;
    }

    .index-change.positive { color: #10b981; }
    .index-change.negative { color: #ef4444; }

    .change-icon {
      width: 14px;
      height: 14px;
    }

    .index-meta {
      font-size: 13px;
      color: #6b7280;
      margin-top: 4px;
    }

    .participant-count {
      text-align: right;
    }

    .participant-number {
      font-size: 24px;
      font-weight: 700;
      color: #111827;
    }

    .participant-label {
      font-size: 12px;
      color: #6b7280;
    }

    /* Your Performance Card */
    .your-performance {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      border-radius: 16px;
      padding: 20px;
      color: white;
      margin: 0 16px 16px;
    }

    .perf-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .perf-label {
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      opacity: 0.9;
    }

    .percentile-badge {
      background: rgba(255,255,255,0.2);
      padding: 6px 12px;
      border-radius: 16px;
      font-size: 13px;
      font-weight: 600;
    }

    .perf-main {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
    }

    .your-score {
      font-size: 48px;
      font-weight: 700;
      line-height: 1;
    }

    .your-delta {
      text-align: right;
    }

    .delta-value {
      font-size: 20px;
      font-weight: 600;
    }

    .delta-label {
      font-size: 12px;
      opacity: 0.8;
    }

    .perf-context {
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid rgba(255,255,255,0.2);
      font-size: 13px;
      opacity: 0.9;
    }

    /* Time Toggles */
    .time-toggles {
      display: flex;
      gap: 4px;
      padding: 0 16px 16px;
      overflow-x: auto;
    }

    .time-toggle {
      padding: 8px 14px;
      border: none;
      background: #f3f4f6;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 500;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .time-toggle.active {
      background: #111827;
      color: white;
    }

    /* Chart Container */
    .chart-section {
      padding: 0 16px 8px;
    }

    .chart-wrapper {
      position: relative;
      height: 240px;
      background: #fafafa;
      border-radius: 12px;
      padding: 16px 8px;
    }

    .chart-legend {
      display: flex;
      gap: 20px;
      padding: 12px 16px;
      justify-content: center;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 12px;
      color: #6b7280;
    }

    .legend-line {
      width: 20px;
      height: 3px;
      border-radius: 2px;
    }

    .legend-line.index { background: #9ca3af; }
    .legend-line.user { background: #3b82f6; }

    /* Quick Stats */
    .quick-stats {
      display: flex;
      gap: 8px;
      padding: 0 16px 20px;
      overflow-x: auto;
    }

    .quick-stat {
      flex: 1;
      min-width: 100px;
      background: #f9fafb;
      border-radius: 12px;
      padding: 14px;
      text-align: center;
    }

    .quick-stat-value {
      font-size: 20px;
      font-weight: 700;
      color: #111827;
    }

    .quick-stat-label {
      font-size: 11px;
      color: #6b7280;
      margin-top: 2px;
    }

    .quick-stat-compare {
      font-size: 11px;
      color: #10b981;
      margin-top: 4px;
    }

    .quick-stat-compare.below {
      color: #f59e0b;
    }

    /* Distribution Section */
    .distribution-section {
      padding: 0 16px 24px;
    }

    .section-title {
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: #6b7280;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .distribution-bar {
      display: flex;
      height: 32px;
      border-radius: 8px;
      overflow: hidden;
      margin-bottom: 8px;
    }

    .dist-segment {
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 600;
      color: white;
      position: relative;
    }

    .dist-segment.top { background: #10b981; }
    .dist-segment.strong { background: #3b82f6; }
    .dist-segment.building { background: #f59e0b; }
    .dist-segment.starting { background: #9ca3af; }

    .you-marker {
      position: absolute;
      top: -8px;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .you-arrow {
      width: 0;
      height: 0;
      border-left: 6px solid transparent;
      border-right: 6px solid transparent;
      border-top: 8px solid #111827;
    }

    .you-label {
      background: #111827;
      color: white;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 10px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .dist-labels {
      display: flex;
      justify-content: space-between;
    }

    .dist-label {
      font-size: 11px;
      color: #6b7280;
    }

    /* Insight Card */
    .insight-card {
      margin: 0 16px 24px;
      padding: 16px;
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      border-radius: 12px;
    }

    .insight-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
    }

    .insight-icon {
      width: 18px;
      height: 18px;
      color: #3b82f6;
    }

    .insight-title {
      font-size: 13px;
      font-weight: 600;
      color: #1e40af;
    }

    .insight-text {
      font-size: 14px;
      color: #1e40af;
      line-height: 1.5;
    }

    /* Your Habit Detail */
    .your-habit-section {
      padding: 0 16px 24px;
    }

    .habit-detail-card {
      background: #f9fafb;
      border-radius: 16px;
      padding: 20px;
    }

    .habit-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .habit-icon {
      width: 48px;
      height: 48px;
      background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .habit-icon svg {
      width: 24px;
      height: 24px;
      color: white;
    }

    .habit-info h3 {
      font-size: 17px;
      font-weight: 600;
      color: #111827;
    }

    .habit-info p {
      font-size: 13px;
      color: #6b7280;
      margin-top: 2px;
    }

    .habit-stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }

    .habit-stat {
      text-align: center;
    }

    .habit-stat-value {
      font-size: 18px;
      font-weight: 700;
      color: #111827;
    }

    .habit-stat-label {
      font-size: 11px;
      color: #6b7280;
      margin-top: 2px;
    }

    /* Leaderboard Teaser */
    .leaderboard-teaser {
      margin: 0 16px 24px;
      padding: 16px;
      background: #fafafa;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
    }

    .leaderboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .leaderboard-title {
      font-size: 13px;
      font-weight: 600;
      color: #374151;
    }

    .leaderboard-link {
      font-size: 12px;
      color: #3b82f6;
      text-decoration: none;
      font-weight: 500;
    }

    .leaderboard-row {
      display: flex;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid #f3f4f6;
    }

    .leaderboard-row:last-child {
      border-bottom: none;
    }

    .leaderboard-rank {
      width: 28px;
      font-size: 14px;
      font-weight: 600;
      color: #6b7280;
    }

    .leaderboard-avatar {
      width: 32px;
      height: 32px;
      background: #e5e7eb;
      border-radius: 50%;
      margin-right: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      color: #6b7280;
    }

    .leaderboard-row.you .leaderboard-avatar {
      background: linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%);
      color: white;
    }

    .leaderboard-name {
      flex: 1;
      font-size: 14px;
      color: #374151;
    }

    .leaderboard-row.you .leaderboard-name {
      font-weight: 600;
      color: #111827;
    }

    .leaderboard-score {
      font-size: 14px;
      font-weight: 600;
      color: #111827;
    }

    /* Bottom Nav */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: white;
      border-top: 1px solid #e5e7eb;
      display: flex;
      justify-content: space-around;
      padding: 8px 0;
      max-width: 768px;
      margin: 0 auto;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 8px 16px;
      color: #9ca3af;
      text-decoration: none;
      font-size: 11px;
    }

    .nav-item.active { color: #3b82f6; }
    .nav-item svg { width: 24px; height: 24px; margin-bottom: 4px; }

    /* Not Tracking State */
    .not-tracking-banner {
      margin: 0 16px 16px;
      padding: 16px;
      background: #fef3c7;
      border: 1px solid #fcd34d;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .not-tracking-banner.hidden {
      display: none;
    }

    .not-tracking-icon {
      width: 20px;
      height: 20px;
      color: #d97706;
    }

    .not-tracking-text {
      flex: 1;
      font-size: 14px;
      color: #92400e;
    }

    .add-behavior-btn {
      padding: 8px 16px;
      background: #d97706;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="behavior-index-page">
    <!-- Header -->
    <div class="detail-header">
      <button class="back-button">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      <div class="header-content">
        <div class="behavior-title">
          Cardio Index
          <span class="behavior-ticker">$CARDIO</span>
        </div>
        <div class="behavior-category">Fitness 路 Running, cycling, swimming, etc.</div>
      </div>
      <div class="live-badge">
        <span class="live-dot"></span>
        Live
      </div>
    </div>

    <!-- Index Hero -->
    <div class="index-hero">
      <div class="index-main-row">
        <div class="index-value-section">
          <div class="index-label">Cardio Index</div>
          <div class="index-value-row">
            <div class="index-value">71.3</div>
            <div class="index-change positive">
              <svg class="change-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/>
              </svg>
              +1.8%
            </div>
          </div>
          <div class="index-meta">Avg Flux Score across all cardio trackers 路 30d</div>
        </div>
        <div class="participant-count">
          <div class="participant-number">847</div>
          <div class="participant-label">tracking</div>
        </div>
      </div>
    </div>

    <!-- Your Performance Card -->
    <div class="your-performance">
      <div class="perf-header">
        <div class="perf-label">Your Cardio Flux Score</div>
        <div class="percentile-badge">Top 16%</div>
      </div>
      <div class="perf-main">
        <div class="your-score">78.2</div>
        <div class="your-delta">
          <div class="delta-value">+6.9</div>
          <div class="delta-label">above index</div>
        </div>
      </div>
      <div class="perf-context">Ahead of 713 users</div>
    </div>

    <!-- Time Toggles -->
    <div class="time-toggles">
      <button class="time-toggle">1W</button>
      <button class="time-toggle active">1M</button>
      <button class="time-toggle">3M</button>
      <button class="time-toggle">6M</button>
      <button class="time-toggle">1Y</button>
      <button class="time-toggle">All</button>
    </div>

    <!-- Chart -->
    <div class="chart-section">
      <div class="chart-wrapper">
        <canvas id="behaviorChart"></canvas>
      </div>
      <div class="chart-legend">
        <div class="legend-item">
          <div class="legend-line index"></div>
          <span>Cardio Index (all users)</span>
        </div>
        <div class="legend-item">
          <div class="legend-line user"></div>
          <span>You</span>
        </div>
      </div>
    </div>

    <!-- Quick Stats -->
    <div class="quick-stats">
      <div class="quick-stat">
        <div class="quick-stat-value">4.2</div>
        <div class="quick-stat-label">Your logs/wk</div>
        <div class="quick-stat-compare">Index: 3.1</div>
      </div>
      <div class="quick-stat">
        <div class="quick-stat-value">1.8d</div>
        <div class="quick-stat-label">Your avg gap</div>
        <div class="quick-stat-compare">Index: 2.4d</div>
      </div>
      <div class="quick-stat">
        <div class="quick-stat-value">94%</div>
        <div class="quick-stat-label">Consistency</div>
        <div class="quick-stat-compare">Index: 76%</div>
      </div>
    </div>

    <!-- Distribution -->
    <div class="distribution-section">
      <div class="section-title">Population Distribution</div>
      <div class="distribution-bar">
        <div class="dist-segment top" style="width: 15%">
          <div class="you-marker" style="left: 70%">
            <div class="you-label">YOU</div>
            <div class="you-arrow"></div>
          </div>
        </div>
        <div class="dist-segment strong" style="width: 32%"></div>
        <div class="dist-segment building" style="width: 35%"></div>
        <div class="dist-segment starting" style="width: 18%"></div>
      </div>
      <div class="dist-labels">
        <span class="dist-label">Top 15%</span>
        <span class="dist-label">Strong 32%</span>
        <span class="dist-label">Building 35%</span>
        <span class="dist-label">Starting 18%</span>
      </div>
    </div>

    <!-- Insight -->
    <div class="insight-card">
      <div class="insight-header">
        <svg class="insight-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
        </svg>
        <span class="insight-title">Pattern Insight</span>
      </div>
      <div class="insight-text">
        Your cardio consistency (1.8 day avg gap) beats 84% of users. The index shows most users have 3-4 day gaps between sessions. Your pattern of shorter, more frequent sessions is outperforming the "weekend warrior" approach common in this index.
      </div>
    </div>

    <!-- Your Habit -->
    <div class="your-habit-section">
      <div class="section-title">Your Cardio Habit</div>
      <div class="habit-detail-card">
        <div class="habit-header">
          <div class="habit-icon">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
          </div>
          <div class="habit-info">
            <h3>$RUN 路 Morning Run</h3>
            <p>Variable rate 路 $0.25/minute</p>
          </div>
        </div>
        <div class="habit-stats-grid">
          <div class="habit-stat">
            <div class="habit-stat-value">78.2</div>
            <div class="habit-stat-label">Flux Score</div>
          </div>
          <div class="habit-stat">
            <div class="habit-stat-value">42</div>
            <div class="habit-stat-label">Total Logs</div>
          </div>
          <div class="habit-stat">
            <div class="habit-stat-value">$127</div>
            <div class="habit-stat-label">Earned</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Leaderboard Teaser -->
    <div class="leaderboard-teaser">
      <div class="leaderboard-header">
        <span class="leaderboard-title">Cardio Leaderboard</span>
        <a href="#" class="leaderboard-link">View all</a>
      </div>
      <div class="leaderboard-row">
        <span class="leaderboard-rank">1</span>
        <div class="leaderboard-avatar"></div>
        <span class="leaderboard-name">Anonymous</span>
        <span class="leaderboard-score">94.2</span>
      </div>
      <div class="leaderboard-row">
        <span class="leaderboard-rank">2</span>
        <div class="leaderboard-avatar"></div>
        <span class="leaderboard-name">Anonymous</span>
        <span class="leaderboard-score">91.8</span>
      </div>
      <div class="leaderboard-row">
        <span class="leaderboard-rank">3</span>
        <div class="leaderboard-avatar"></div>
        <span class="leaderboard-name">Anonymous</span>
        <span class="leaderboard-score">89.3</span>
      </div>
      <div class="leaderboard-row you">
        <span class="leaderboard-rank">47</span>
        <div class="leaderboard-avatar">You</div>
        <span class="leaderboard-name">You</span>
        <span class="leaderboard-score">78.2</span>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottom-nav">
      <a href="#" class="nav-item">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
        </svg>
        Home
      </a>
      <a href="#" class="nav-item">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
        </svg>
        Portfolio
      </a>
      <a href="#" class="nav-item active">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
        </svg>
        Indices
      </a>
      <a href="#" class="nav-item">
        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
        </svg>
        Account
      </a>
    </div>
  </div>

  <script>
    // Generate 30 days of data
    const generateData = () => {
      const labels = [];
      const indexData = [];
      const userData = [];
      
      const today = new Date();
      let indexBase = 70;
      let userBase = 74;
      
      for (let i = 30; i >= 0; i -= 2) {
        const date = new Date(today);
        date.setDate(date.getDate() - i);
        labels.push(date.toLocaleDateString('en-US', { month: 'short', day: 'numeric' }));
        
        // Index moves slowly
        indexBase += (Math.random() - 0.45) * 1.2;
        indexBase = Math.max(68, Math.min(74, indexBase));
        indexData.push(parseFloat(indexBase.toFixed(1)));
        
        // User outperforms with more variation
        userBase += (Math.random() - 0.4) * 2;
        userBase = Math.max(72, Math.min(82, userBase));
        userData.push(parseFloat(userBase.toFixed(1)));
      }
      
      return { labels, indexData, userData };
    };

    const data = generateData();
    const ctx = document.getElementById('behaviorChart').getContext('2d');
    
    const userGradient = ctx.createLinearGradient(0, 0, 0, 200);
    userGradient.addColorStop(0, 'rgba(59, 130, 246, 0.2)');
    userGradient.addColorStop(1, 'rgba(59, 130, 246, 0)');

    new Chart(ctx, {
      type: 'line',
      data: {
        labels: data.labels,
        datasets: [
          {
            label: 'You',
            data: data.userData,
            borderColor: '#3b82f6',
            backgroundColor: userGradient,
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointRadius: 0,
            pointHoverRadius: 6,
            pointHoverBackgroundColor: '#3b82f6',
            pointHoverBorderColor: '#fff',
            pointHoverBorderWidth: 2,
          },
          {
            label: 'Cardio Index',
            data: data.indexData,
            borderColor: '#9ca3af',
            backgroundColor: 'transparent',
            borderWidth: 2,
            borderDash: [4, 4],
            fill: false,
            tension: 0.4,
            pointRadius: 0,
            pointHoverRadius: 5,
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        interaction: {
          mode: 'index',
          intersect: false,
        },
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: '#fff',
            titleColor: '#6b7280',
            bodyColor: '#111827',
            borderColor: '#e5e7eb',
            borderWidth: 1,
            cornerRadius: 8,
            padding: 12,
            displayColors: true,
            callbacks: {
              afterBody: function(context) {
                if (context.length >= 2) {
                  const userVal = context[0].parsed.y;
                  const indexVal = context[1].parsed.y;
                  const diff = (userVal - indexVal).toFixed(1);
                  return [`Delta: +${diff}`];
                }
              }
            }
          }
        },
        scales: {
          x: {
            grid: { display: false },
            ticks: {
              font: { size: 10 },
              color: '#9ca3af',
              maxRotation: 0,
              autoSkip: true,
              maxTicksLimit: 5
            }
          },
          y: {
            min: 65,
            max: 85,
            grid: { color: '#f3f4f6' },
            ticks: {
              font: { size: 10 },
              color: '#9ca3af',
              stepSize: 5
            }
          }
        }
      }
    });

    // Time toggle interaction
    document.querySelectorAll('.time-toggle').forEach(button => {
      button.addEventListener('click', function() {
        document.querySelectorAll('.time-toggle').forEach(b => b.classList.remove('active'));
        this.classList.add('active');
      });
    });
  </script>
</body>
</html>
